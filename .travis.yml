# refer:https://gist.github.com/HoverBaum/d11361337d2c59f0de591c9c9390c1a9

language: node_js

node_js: stable

branches:
  only:
  - master

before_install:
- npm install -g hexo

install:
- npm install

before_script:
- git config --global user.name 'wusphinx'
- git config --global user.email 'wusphinx.sphinx@gmail.com'

script:
- hexo generate

after_success:
- cd ./public
- git init
- git add .
- git commit -m "Update docs"
- git push --force --quiet "$DEPLOY_REPO"  master:master